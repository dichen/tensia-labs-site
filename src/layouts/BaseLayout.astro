---
import "../styles/global.css";
import { getCollection } from "astro:content";

const { title = "Tensia Labs", description = "Solution and technical blogs for IoT, instrumentation automation and data acquisition." } = Astro.props;
const projectEntries = (await getCollection("projects"))
  .sort((a, b) => a.data.title.localeCompare(b.data.title));
---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content={description} />
    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
    <title>{title}</title>
  </head>
  <body class="min-h-screen bg-slate-100 text-slate-900 antialiased">
    <header class="border-b border-slate-200">
      <nav class="mx-auto flex max-w-5xl items-center justify-between px-4 py-4">
        <a class="flex items-center gap-2 font-mono font-bold text-lg tracking-tight" href="/">
          <img src="/logo.svg" alt="Tensia Labs" class="h-8 w-8" />
          <span class="text-blue-900">Tensia</span><span class="text-slate-600">Labs</span>
        </a>
        <div class="flex items-center gap-4 text-sm">
          <div class="group relative">
            <a class="hover:underline focus-visible:underline" href="/projects">Projects</a>
            <div class="absolute left-0 top-full z-10 mt-0 w-44 rounded-md border border-slate-200 bg-white py-2 shadow-lg opacity-0 invisible translate-y-1 pointer-events-none transition group-hover:opacity-100 group-hover:visible group-hover:translate-y-0 group-hover:pointer-events-auto group-focus-within:opacity-100 group-focus-within:visible group-focus-within:translate-y-0 group-focus-within:pointer-events-auto">
              <a class="block px-3 py-2 text-slate-700 hover:bg-slate-100" href="/projects">All Projects</a>
              {projectEntries.map(project => (
                <a class="block px-3 py-2 text-slate-700 hover:bg-slate-100" href={`/projects/${project.slug}`}>
                  {project.data.title}
                </a>
              ))}
            </div>
          </div>
          <div class="group relative">
            <a class="hover:underline focus-visible:underline" href="/product">Products</a>
            <div class="absolute left-0 top-full z-10 mt-0 w-44 rounded-md border border-slate-200 bg-white py-2 shadow-lg opacity-0 invisible translate-y-1 pointer-events-none transition group-hover:opacity-100 group-hover:visible group-hover:translate-y-0 group-hover:pointer-events-auto group-focus-within:opacity-100 group-focus-within:visible group-focus-within:translate-y-0 group-focus-within:pointer-events-auto">
              <a class="block px-3 py-2 text-slate-700 hover:bg-slate-100" href="/product">Overview</a>
            </div>
          </div>
          <a class="hover:underline" href="/blog">Blog</a>
          <a class="hover:underline" href="/about">About</a>
          <a class="hover:underline" href="/contact">Contact</a>
        </div>
      </nav>
    </header>

    <main class="mx-auto max-w-5xl px-4 py-10">
      <slot />
    </main>

    <footer class="border-t border-slate-200">
      <div class="mx-auto max-w-5xl px-4 py-6 text-xs text-slate-500">
        Â© {new Date().getFullYear()} Tensia Labs.
      </div>
    </footer>
  </body>
</html>
