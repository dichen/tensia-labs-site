---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog", ({ data }) => !data.draft)).sort(
  (a, b) =>
    (b.data.publishedAt?.getTime() ?? 0) - (a.data.publishedAt?.getTime() ?? 0)
);
---
<BaseLayout title="Blog â€” Tensia Labs">
  <h1 class="text-2xl font-semibold">Blog</h1>
  <p class="mt-2 text-slate-700">Notes, updates, and experiments.</p>

  <ul class="mt-6 space-y-3">
    {posts.map((post) => (
      <li class="rounded-lg border border-slate-200 p-4">
        <div class="flex items-center justify-between gap-4">
          <a class="font-medium hover:underline" href={`/blog/${post.slug}/`}>
            {post.data.title}
          </a>
          <span class="text-xs text-slate-500">
            {post.data.publishedAt.toLocaleDateString()}
          </span>
        </div>
        <div class="mt-1 text-sm text-slate-600">{post.data.description}</div>
      </li>
    ))}
  </ul>
</BaseLayout>
